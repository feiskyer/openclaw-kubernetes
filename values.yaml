# Default values for openclaw.
# This is a YAML-formatted file.
# Declare variables to be passed into your templates.

# -- Number of replicas for the OpenClaw gateway
# Note: Typically should be 1 as OpenClaw maintains state
replicaCount: 1

# -- Docker image configuration
image:
  # -- Image repository
  repository: ghcr.io/feiskyer/openclaw-gateway
  # -- Image pull policy
  pullPolicy: Always
  # -- Image tag (defaults to chart appVersion if not set)
  tag: ""

# -- Image pull secrets for private registries
imagePullSecrets: []

# -- String to override the default name
nameOverride: ""

# -- String to override the default fullname
fullnameOverride: ""

# -- Service account configuration
serviceAccount:
  # -- Specifies whether a service account should be created
  create: true
  # -- Annotations to add to the service account
  annotations: {}
  # -- The name of the service account to use (BYO service account).
  # If set, no ClusterRoleBinding is created (user manages RBAC externally).
  # If not set and create is true, a name is generated using the fullname template.
  name: ""
  # -- Bind service account to a built-in Kubernetes ClusterRole for kubectl access.
  # Options: "" (none), "view" (read-only), "cluster-admin" (full access)
  # Only applies when using chart-created service account (name is not set).
  # When set, automounts the service account token automatically.
  role: "view"

# -- Pod annotations
podAnnotations: {}

# -- Pod security context
podSecurityContext:
  fsGroup: 1024
  fsGroupChangePolicy: "OnRootMismatch"
  runAsNonRoot: true
  seccompProfile:
    type: RuntimeDefault

# -- Container security context
securityContext:
  capabilities:
    drop:
      - ALL
  readOnlyRootFilesystem: true
  runAsNonRoot: true
  runAsUser: 1024
  allowPrivilegeEscalation: false
  seccompProfile:
    type: RuntimeDefault

# -- Service configuration
service:
  # -- Service type
  type: ClusterIP
  # -- Service port
  port: 18789
  # -- Target port on the container
  targetPort: 18789
  # -- NodePort (only used when service.type is NodePort)
  nodePort: null
  # -- Service annotations
  annotations: {}

# -- Ingress configuration
ingress:
  # -- Enable ingress
  enabled: false
  # -- Ingress class name
  className: ""
  # -- Additional annotations for the ingress
  # WebSocket support annotations for common ingress controllers
  annotations:
    # nginx ingress controller
    nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
    nginx.ingress.kubernetes.io/proxy-http-version: "1.1"
    nginx.ingress.kubernetes.io/proxy-buffering: "off"
    # Enable WebSocket upgrade
    nginx.ingress.kubernetes.io/configuration-snippet: |
      proxy_set_header Upgrade $http_upgrade;
      proxy_set_header Connection "upgrade";
    # traefik ingress controller (alternative)
    # traefik.ingress.kubernetes.io/router.entrypoints: websecure
    # traefik.ingress.kubernetes.io/router.tls: "true"
  # -- Ingress hosts
  hosts:
    - host: openclaw.local
      paths:
        - path: /
          pathType: ImplementationSpecific
  # -- TLS configuration
  tls: []
  #  - secretName: openclaw-tls
  #    hosts:
  #      - openclaw.local

# -- Resource requests and limits
resources:
  # -- Resource limits
  limits:
    cpu: 2000m
    memory: 8Gi
  # -- Resource requests
  requests:
    cpu: 250m
    memory: 1Gi

# -- Horizontal Pod Autoscaler configuration
autoscaling:
  # -- Enable HPA
  enabled: false
  # -- Minimum number of replicas
  minReplicas: 1
  # -- Maximum number of replicas
  maxReplicas: 3
  # -- Target CPU utilization percentage
  targetCPUUtilizationPercentage: 80
  # -- Target memory utilization percentage
  targetMemoryUtilizationPercentage: 80
  # -- Custom metrics for HPA
  metrics: []
  # -- Scaling behavior configuration
  behavior: {}

# -- Node selector
nodeSelector: {}

# -- Tolerations for pod scheduling
tolerations: []

# -- Affinity rules for pod scheduling
affinity: {}

# -- Pod topology spread constraints
topologySpreadConstraints: []

# -- Extra environment variables
extraEnv: []
  # - name: EXTRA_VAR
  #   value: "extra-value"

# -- Extra environment variables from secrets/configmaps
extraEnvFrom: []
  # - secretRef:
  #     name: my-secret

# -- Extra volume mounts for the container
extraVolumeMounts: []
  # - name: extra-volume
  #   mountPath: /extra

# -- Extra volumes for the pod
extraVolumes: []
  # - name: extra-volume
  #   persistentVolumeClaim:
  #     claimName: extra-pvc

# -- Init containers
initContainers: []

# -- Sidecar containers
sidecars: []

# -- Persistent Volume configuration
persistence:
  # -- Enable persistent storage
  enabled: true
  # -- Storage class name (empty for default)
  storageClass: ""
  # -- Access mode for the PVC
  accessMode: ReadWriteOnce
  # -- Size of the persistent volume
  size: 100Gi
  # -- Existing PVC to use (if set, StatefulSet will use this instead of creating new PVCs)
  existingClaim: ""
  # -- Annotations for the PVC
  annotations: {}
  # -- Retain policy for the PVC
  retainPolicy: Retain
  # -- Use StatefulSet volumeClaimTemplates (default: true)
  # When true, StatefulSet manages PVC creation via volumeClaimTemplates
  # When false, a separate PVC is created and referenced by StatefulSet
  useStatefulSetVolumeClaim: true

# -- OpenClaw configuration
openclaw:
  # -- OpenClaw gateway configuration (openclaw.json content)
  config:
    # -- Gateway server configuration
    gateway:
      port: 18789
    logging:
      level: "info"
    # -- Agent defaults
    agents:
      defaults:
        verboseDefault: "on"
    # -- Browser configuration for headless Chrome
    browser:
      enabled: true
      remoteCdpTimeoutMs: 1500
      remoteCdpHandshakeTimeoutMs: 3000
      color: "#FF4500"
      executablePath: "/usr/bin/google-chrome"
      headless: true
      noSandbox: true
      attachOnly: false
      defaultProfile: "openclaw"
      profiles:
        openclaw:
          cdpPort: 18800
          color: "#FF4500"


# -- Secrets configuration
secrets:
  # -- Use existing secret instead of creating one
  existingSecret: ""
  # -- Secret annotations
  annotations: {}
  # -- Messaging channel tokens
  discordBotToken: ""
  telegramBotToken: ""
  slackBotToken: ""
  slackAppToken: ""
  # -- Feishu (Lark) channel credentials
  feishuAppId: ""
  feishuAppSecret: ""
  # -- Microsoft Teams channel credentials
  msteamsAppId: ""
  msteamsAppPassword: ""
  msteamsTenantId: ""
  # -- Web search API keys (enables tools.web.search when set)
  # Brave Search - structured results with free tier
  braveApiKey: ""
  # Perplexity - AI-synthesized answers with citations
  perplexityApiKey: ""
  # -- Gateway authentication token
  openclawGatewayToken: ""

# -- Liveness probe configuration
livenessProbe:
  enabled: true
  exec:
    command:
      - node
      - dist/index.js
      - health
  initialDelaySeconds: 30
  periodSeconds: 30
  timeoutSeconds: 10
  failureThreshold: 3
  successThreshold: 1

# -- Readiness probe configuration
readinessProbe:
  enabled: true
  exec:
    command:
      - node
      - dist/index.js
      - health
  initialDelaySeconds: 30
  periodSeconds: 30
  timeoutSeconds: 10
  failureThreshold: 6
  successThreshold: 1

# -- Startup probe configuration
startupProbe:
  enabled: false
  exec:
    command:
      - node
      - dist/index.js
      - health
  initialDelaySeconds: 10
  periodSeconds: 10
  timeoutSeconds: 5
  failureThreshold: 30
  successThreshold: 1

# -- LiteLLM Proxy configuration
litellm:
  # -- Enable LiteLLM proxy deployment
  enabled: true
  # -- Number of replicas
  replicaCount: 1
  # -- LiteLLM image configuration
  image:
    repository: ghcr.io/berriai/litellm
    tag: main-latest
    pullPolicy: IfNotPresent
  # -- Service configuration
  service:
    type: ClusterIP
    port: 4000
    targetPort: 4000
    annotations: {}
  # -- Resource requests and limits
  resources:
    limits:
      cpu: 1000m
      memory: 2Gi
    requests:
      cpu: 100m
      memory: 256Mi
  # -- Model to proxy through LiteLLM
  model: claude-opus-4.6
  # -- LiteLLM provider and credentials
  secrets:
    # -- Model provider: github_copilot, anthropic, or openai
    provider: github_copilot
    # -- API key for the provider (not needed for github_copilot)
    apiKey: ""
    # -- API base URL (optional, for custom endpoints)
    apiBase: ""
  # -- Persistent storage for LiteLLM data (~/.config/litellm)
  persistence:
    # -- Enable persistent storage
    enabled: true
    # -- Storage class name (empty for default)
    storageClass: ""
    # -- Access mode for the PVC
    accessMode: ReadWriteOnce
    # -- Size of the persistent volume
    size: 1Gi
    # -- Mount path inside the container
    mountPath: /home/litellm/.config/litellm
    # -- Use an existing PVC instead of creating one
    existingClaim: ""
  # -- Extra environment variables
  extraEnv: []
  # -- Override the default LiteLLM config entirely
  # When set, replaces the built-in config in the ConfigMap template.
  # When empty, the default config (github_copilot models) is used.
  configOverride: ""

# -- Pod Disruption Budget configuration
podDisruptionBudget:
  # -- Enable Pod Disruption Budget
  enabled: false
  # -- Minimum available pods (number or percentage)
  minAvailable: 1
  # -- Maximum unavailable pods (number or percentage)
  # maxUnavailable: 1
